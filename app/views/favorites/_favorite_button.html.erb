<% if !current_user.favorite?(micropost) %>
   <%= form_with(model: current_user.favorites.build, local: true) do |f| %>
     <%= hidden_field_tag :micropost_id, micropost.id %>
     <%= f.submit "お気に入り" %>
   <% end %>
<% else %>
   <%= form_with(model: current_user.favorites.find_by(micropost_id: micropost.id), local: true, method: :delete) do |f| %>
     <%= hidden_field_tag :micropost_id, micropost.id %>
     <%= f.submit "お気に入り解除" %>
   <% end %>
<% end %>